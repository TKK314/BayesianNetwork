<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 より複雑な事例：汎用ベイジアンネットワーク | _main.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="6 より複雑な事例：汎用ベイジアンネットワーク | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 より複雑な事例：汎用ベイジアンネットワーク | _main.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="時系列データダイナミックベイジアンネットワーク.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 本サイトについて</a></li>
<li class="chapter" data-level="2" data-path="離散型データ事例.html"><a href="離散型データ事例.html"><i class="fa fa-check"></i><b>2</b> 離散型データ事例</a>
<ul>
<li class="chapter" data-level="2.1" data-path="離散型データ事例.html"><a href="離散型データ事例.html#事例紹介交通手段に関する調査"><i class="fa fa-check"></i><b>2.1</b> 事例紹介：交通手段に関する調査</a></li>
<li class="chapter" data-level="2.2" data-path="離散型データ事例.html"><a href="離散型データ事例.html#グラフィカル表現"><i class="fa fa-check"></i><b>2.2</b> グラフィカル表現</a></li>
<li class="chapter" data-level="2.3" data-path="離散型データ事例.html"><a href="離散型データ事例.html#確率的表現"><i class="fa fa-check"></i><b>2.3</b> 確率的表現</a></li>
<li class="chapter" data-level="2.4" data-path="離散型データ事例.html"><a href="離散型データ事例.html#パラメータの推定条件付き確率表"><i class="fa fa-check"></i><b>2.4</b> パラメータの推定：条件付き確率表</a></li>
<li class="chapter" data-level="2.5" data-path="離散型データ事例.html"><a href="離散型データ事例.html#dag構造の学習検定とスコア"><i class="fa fa-check"></i><b>2.5</b> DAG構造の学習：検定とスコア</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="離散型データ事例.html"><a href="離散型データ事例.html#条件付き独立性検定"><i class="fa fa-check"></i><b>2.5.1</b> 条件付き独立性検定</a></li>
<li class="chapter" data-level="2.5.2" data-path="離散型データ事例.html"><a href="離散型データ事例.html#ネットワークスコア"><i class="fa fa-check"></i><b>2.5.2</b> ネットワークスコア</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="離散型データ事例.html"><a href="離散型データ事例.html#離散型データでベイジアンネットワークを使ってみよう"><i class="fa fa-check"></i><b>2.6</b> 離散型データでベイジアンネットワークを使ってみよう</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="離散型データ事例.html"><a href="離散型データ事例.html#dag構造を使って"><i class="fa fa-check"></i><b>2.6.1</b> DAG構造を使って</a></li>
<li class="chapter" data-level="2.6.2" data-path="離散型データ事例.html"><a href="離散型データ事例.html#条件付き確率表を使って"><i class="fa fa-check"></i><b>2.6.2</b> 条件付き確率表を使って</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="離散型データ事例.html"><a href="離散型データ事例.html#ベイジアンネットワークの図示"><i class="fa fa-check"></i><b>2.7</b> ベイジアンネットワークの図示</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="離散型データ事例.html"><a href="離散型データ事例.html#条件付き確率分布の図示"><i class="fa fa-check"></i><b>2.7.1</b> 条件付き確率分布の図示</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html"><i class="fa fa-check"></i><b>3</b> 連続型データ事例：ガウシアン・ベイジアンネットワーク</a>
<ul>
<li class="chapter" data-level="3.1" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#事例紹介"><i class="fa fa-check"></i><b>3.1</b> 事例紹介</a></li>
<li class="chapter" data-level="3.2" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#グラフィカル表現-1"><i class="fa fa-check"></i><b>3.2</b> グラフィカル表現</a></li>
<li class="chapter" data-level="3.3" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#確率的表現-1"><i class="fa fa-check"></i><b>3.3</b> 確率的表現</a></li>
<li class="chapter" data-level="3.4" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#パラメータの推定相関係数"><i class="fa fa-check"></i><b>3.4</b> パラメータの推定：相関係数</a></li>
<li class="chapter" data-level="3.5" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#dag構造の学習検定とスコア-1"><i class="fa fa-check"></i><b>3.5</b> DAG構造の学習：検定とスコア</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#条件付き独立性検定-1"><i class="fa fa-check"></i><b>3.5.1</b> 条件付き独立性検定</a></li>
<li class="chapter" data-level="3.5.2" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#ネットワークスコア-1"><i class="fa fa-check"></i><b>3.5.2</b> ネットワークスコア</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#ガウシアンベイジアンネットワークを使ってみよう"><i class="fa fa-check"></i><b>3.6</b> ガウシアン・ベイジアンネットワークを使ってみよう</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#厳密推論-1"><i class="fa fa-check"></i><b>3.6.1</b> 厳密推論</a></li>
<li class="chapter" data-level="3.6.2" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#近似推論-1"><i class="fa fa-check"></i><b>3.6.2</b> 近似推論</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#ガウシアンベイジアンネットワークの図示"><i class="fa fa-check"></i><b>3.7</b> ガウシアン・ベイジアンネットワークの図示</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#dagの図示"><i class="fa fa-check"></i><b>3.7.1</b> DAGの図示</a></li>
<li class="chapter" data-level="3.7.2" data-path="連続型データ事例ガウシアンベイジアンネットワーク.html"><a href="連続型データ事例ガウシアンベイジアンネットワーク.html#条件付き確率分布の図示-1"><i class="fa fa-check"></i><b>3.7.2</b> 条件付き確率分布の図示</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html"><i class="fa fa-check"></i><b>4</b> 混合事例：条件付きガウシアン・ベイジアンネットワーク</a>
<ul>
<li class="chapter" data-level="4.1" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#事例紹介健康管理にかかるコスト"><i class="fa fa-check"></i><b>4.1</b> 事例紹介：健康管理にかかるコスト</a></li>
<li class="chapter" data-level="4.2" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#パラメータの推定混合回帰"><i class="fa fa-check"></i><b>4.2</b> パラメータの推定：混合回帰</a></li>
<li class="chapter" data-level="4.3" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#dag構造の学習検定とスコア-2"><i class="fa fa-check"></i><b>4.3</b> DAG構造の学習：検定とスコア</a></li>
<li class="chapter" data-level="4.4" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#条件付きガウシアンベイジアンネットワークを使ってみよう"><i class="fa fa-check"></i><b>4.4</b> 条件付きガウシアンベイジアンネットワークを使ってみよう</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#入院日数が少なくとも1日以上d1で少なくとも固定費が生じたi100場合を想定する"><i class="fa fa-check"></i><b>4.4.1</b> 入院日数が少なくとも1日以上(D&gt;=1)で、少なくとも固定費が生じた(I&gt;=100)場合を想定する</a></li>
<li class="chapter" data-level="4.4.2" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#入院日数dと既往歴cについて確認する"><i class="fa fa-check"></i><b>4.4.2</b> 入院日数(D)と既往歴(C)について確認する</a></li>
<li class="chapter" data-level="4.4.3" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#入院にかかる支出iと通院にかかる支出o医療費にかかる税金tに関してシミュレーションを実施"><i class="fa fa-check"></i><b>4.4.3</b> 入院にかかる支出(I)と通院にかかる支出(O)、医療費にかかる税金(T)に関して、シミュレーションを実施</a></li>
<li class="chapter" data-level="4.4.4" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#では現状の税金の額で将来健康管理システムを維持できるのか"><i class="fa fa-check"></i><b>4.4.4</b> では、現状の税金の額で将来健康管理システムを維持できるのか</a></li>
<li class="chapter" data-level="4.4.5" data-path="混合事例条件付きガウシアンベイジアンネットワーク.html"><a href="混合事例条件付きガウシアンベイジアンネットワーク.html#既往症の保有率が時間とともに変化するかもしれない仮説を検証"><i class="fa fa-check"></i><b>4.4.5</b> 既往症の保有率が時間とともに変化するかもしれない仮説を検証</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html"><i class="fa fa-check"></i><b>5</b> 時系列データ：ダイナミック・ベイジアンネットワーク</a>
<ul>
<li class="chapter" data-level="5.1" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#事例紹介ドモティクスdomotics"><i class="fa fa-check"></i><b>5.1</b> 事例紹介：ドモティクス(domotics)</a></li>
<li class="chapter" data-level="5.2" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#グラフィカル表現-2"><i class="fa fa-check"></i><b>5.2</b> グラフィカル表現</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#静的dag"><i class="fa fa-check"></i><b>5.2.1</b> 静的DAG</a></li>
<li class="chapter" data-level="5.2.2" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#ナイーブdag"><i class="fa fa-check"></i><b>5.2.2</b> ナイーブDAG</a></li>
<li class="chapter" data-level="5.2.3" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#より倹約的なdag"><i class="fa fa-check"></i><b>5.2.3</b> より倹約的なDAG</a></li>
<li class="chapter" data-level="5.2.4" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#ロールアップグラフ"><i class="fa fa-check"></i><b>5.2.4</b> ロールアップグラフ</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#確率的表現-2"><i class="fa fa-check"></i><b>5.3</b> 確率的表現</a></li>
<li class="chapter" data-level="5.4" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#dbnの学習"><i class="fa fa-check"></i><b>5.4</b> DBNの学習</a></li>
<li class="chapter" data-level="5.5" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#dbnを使ってみよう"><i class="fa fa-check"></i><b>5.5</b> DBNを使ってみよう</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#屋内適温屋外寒冷風通しは良くないとき風通しがよく適温にするために窓を開けるべきか"><i class="fa fa-check"></i><b>5.5.1</b> 屋内適温、屋外寒冷、風通しは良くないとき、風通しがよく適温にするために窓を開けるべきか？</a></li>
<li class="chapter" data-level="5.5.2" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#t0で屋外の状態が不明なとき窓を開けるべきか"><i class="fa fa-check"></i><b>5.5.2</b> t0で屋外の状態が不明なとき、窓を開けるべきか</a></li>
<li class="chapter" data-level="5.5.3" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#このプロセスを自動化する"><i class="fa fa-check"></i><b>5.5.3</b> このプロセスを自動化する</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="時系列データダイナミックベイジアンネットワーク.html"><a href="時系列データダイナミックベイジアンネットワーク.html#dbnの図示"><i class="fa fa-check"></i><b>5.6</b> DBNの図示</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html"><i class="fa fa-check"></i><b>6</b> より複雑な事例：汎用ベイジアンネットワーク</a>
<ul>
<li class="chapter" data-level="6.1" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#事例紹介救命救急科の待ち時間"><i class="fa fa-check"></i><b>6.1</b> 事例紹介：救命救急科の待ち時間</a></li>
<li class="chapter" data-level="6.2" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#グラフィカル及び確率的表現"><i class="fa fa-check"></i><b>6.2</b> グラフィカル及び確率的表現</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#i多項分布の確率変数をともなうモデル"><i class="fa fa-check"></i><b>6.2.1</b> I：多項分布の確率変数をともなうモデル</a></li>
<li class="chapter" data-level="6.2.2" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#a-β分布"><i class="fa fa-check"></i><b>6.2.2</b> A: β分布</a></li>
<li class="chapter" data-level="6.2.3" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#sトラウマスコア各ポイントの二項確率をロジスティック回帰で決定"><i class="fa fa-check"></i><b>6.2.3</b> S:トラウマスコア：各ポイントの二項確率をロジスティック回帰で決定</a></li>
<li class="chapter" data-level="6.2.4" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#o病床利用率ベータ分布"><i class="fa fa-check"></i><b>6.2.4</b> O:病床利用率：ベータ分布</a></li>
<li class="chapter" data-level="6.2.5" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#t到着時間帯周期関数"><i class="fa fa-check"></i><b>6.2.5</b> T:到着時間帯：周期関数</a></li>
<li class="chapter" data-level="6.2.6" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#wトリアージにかかる待ち時間対数正規分布をともなう確率変数"><i class="fa fa-check"></i><b>6.2.6</b> W:トリアージにかかる待ち時間：対数正規分布をともなう確率変数</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#stanを使ってモデル構築"><i class="fa fa-check"></i><b>6.3</b> Stanを使ってモデル構築</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#データの生成"><i class="fa fa-check"></i><b>6.3.1</b> データの生成</a></li>
<li class="chapter" data-level="6.3.2" data-path="より複雑な事例汎用ベイジアンネットワーク.html"><a href="より複雑な事例汎用ベイジアンネットワーク.html#変数に関する確認"><i class="fa fa-check"></i><b>6.3.2</b> 変数に関する確認</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="より複雑な事例汎用ベイジアンネットワーク" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> より複雑な事例：汎用ベイジアンネットワーク<a href="より複雑な事例汎用ベイジアンネットワーク.html#より複雑な事例汎用ベイジアンネットワーク" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>変量効果を伴ったさらに一般的なケース</p>
<div id="事例紹介救命救急科の待ち時間" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> 事例紹介：救命救急科の待ち時間<a href="より複雑な事例汎用ベイジアンネットワーク.html#事例紹介救命救急科の待ち時間" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<table>
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="18%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th>項目</th>
<th>型</th>
<th>略語</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>年齢</td>
<td>連続</td>
<td>A</td>
<td></td>
</tr>
<tr class="even">
<td>インシデントのタイプ</td>
<td>離散</td>
<td>I</td>
<td>家庭内、交通事故、業務上、その他</td>
</tr>
<tr class="odd">
<td>トラウマスコア</td>
<td>連続</td>
<td>S</td>
<td>その患者が治療を必要とする緊急性の程度（0-12）</td>
</tr>
<tr class="even">
<td>病床利用率</td>
<td>連続</td>
<td>O</td>
<td></td>
</tr>
<tr class="odd">
<td>到着時間帯</td>
<td>連続</td>
<td>T</td>
<td></td>
</tr>
<tr class="even">
<td>トリアージに係る待ち時間</td>
<td>連続</td>
<td>W</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="グラフィカル及び確率的表現" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> グラフィカル及び確率的表現<a href="より複雑な事例汎用ベイジアンネットワーク.html#グラフィカル及び確率的表現" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb287-1" tabindex="-1"></a><span class="fu">library</span>(bnlearn)</span>
<span id="cb287-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb287-2" tabindex="-1"></a>dag <span class="ot">&lt;-</span> <span class="fu">model2network</span>(<span class="st">&quot;[I][A][S|I:A][O][T][W|S:O:T]&quot;</span>)</span>
<span id="cb287-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb287-3" tabindex="-1"></a><span class="fu">graphviz.plot</span>(dag)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-156-1.png" width="672" /></p>
<p>より現実的な方法で専門知識を利用して自由なモデリングを実施する</p>
<div id="i多項分布の確率変数をともなうモデル" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> I：多項分布の確率変数をともなうモデル<a href="より複雑な事例汎用ベイジアンネットワーク.html#i多項分布の確率変数をともなうモデル" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<thead>
<tr class="header">
<th>インシデント</th>
<th>確率</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>家庭内：domestic</td>
<td>0.50</td>
</tr>
<tr class="even">
<td>交通事故：road</td>
<td>0.075</td>
</tr>
<tr class="odd">
<td>業務上：word</td>
<td>0.25</td>
</tr>
<tr class="even">
<td>その他：other</td>
<td>0.175</td>
</tr>
</tbody>
</table>
</div>
<div id="a-β分布" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> A: β分布<a href="より複雑な事例汎用ベイジアンネットワーク.html#a-β分布" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>NHSデータでは0-100歳を5歳単位で分割しているが、パラメータが20必要になるためベータ分布を用いることとする</p>
<p><span class="math display">\[
A \sim\lceil Beta(1.1,1.5) \cdot 100 \rfloor
\]</span></p>
<p>これにより運ばれる人の年齢分布の主要な特徴を示す。</p>
<p>人口の分布と、年齢別の運ばれる確率を掛け合わせると以下のようなグラフが得られる、らしい。</p>
<p>これは統計的な情報から算出し、それっぽいグラフを作っているということ</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb288-1" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> <span class="fu">rbeta</span>(<span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">shape1 =</span> <span class="fl">1.1</span>, <span class="at">shape2 =</span> <span class="fl">1.5</span>)),</span>
<span id="cb288-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb288-2" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;Age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;probability&quot;</span>, <span class="at">main =</span> <span class="st">&quot;&quot;</span>, <span class="at">freq =</span> <span class="cn">FALSE</span>,</span>
<span id="cb288-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb288-3" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">axes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb288-4"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb288-4" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">label =</span> <span class="cn">FALSE</span>)</span>
<span id="cb288-5"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb288-5" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-157-1.png" width="672" /></p>
</div>
<div id="sトラウマスコア各ポイントの二項確率をロジスティック回帰で決定" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> S:トラウマスコア：各ポイントの二項確率をロジスティック回帰で決定<a href="より複雑な事例汎用ベイジアンネットワーク.html#sトラウマスコア各ポイントの二項確率をロジスティック回帰で決定" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>トラウマスコアは0-12の整数だが実際には0-2が使われることはほとんどない</p>
<p><span class="math display">\[
log(\frac{p}{1-p}) = \beta_0+\beta_1A+\beta_2 \mathbb{I}(I=road)+\beta_3 \mathbb{I}(I=work)+\beta_4 \mathbb{I}(I=other)
\]</span></p>
<ul>
<li><p>ベースライン(<span class="math inline">\(\beta_0\)</span>：最も起こりやすい出来事である家庭内インシデント）を基準</p>
<ul>
<li>7を設定</li>
</ul></li>
<li><p>ベースラインが加齢（<span class="math inline">\(\beta_1A\)</span>）とともに</p>
<ul>
<li>1ポイント(20歳増えるごとに加算）につき<span class="math inline">\(\beta_1=-0.05\)</span></li>
</ul></li>
<li><p>かつ各種インシデントの平均的な患者の重度によって調節されるような形式</p>
<ul>
<li><span class="math inline">\(\beta_2=-4,\beta_3=-3,\beta_4=-1\)</span></li>
</ul></li>
</ul>
</div>
<div id="o病床利用率ベータ分布" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> O:病床利用率：ベータ分布<a href="より複雑な事例汎用ベイジアンネットワーク.html#o病床利用率ベータ分布" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>統計より、平均は0.90, 密度は0.80から0.99に集中する</p>
<p><span class="math display">\[
O\sim Beta(12,2)
\]</span></p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb289-1" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">rbeta</span>(<span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">shape1 =</span> <span class="dv">12</span>, <span class="at">shape2 =</span> <span class="dv">2</span>),</span>
<span id="cb289-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb289-2" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;Occupancy Rate&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;probability&quot;</span>, <span class="at">main =</span> <span class="st">&quot;&quot;</span>, <span class="at">freq =</span> <span class="cn">FALSE</span>,</span>
<span id="cb289-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb289-3" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">axes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb289-4"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb289-4" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">label =</span> <span class="cn">FALSE</span>)</span>
<span id="cb289-5"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb289-5" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.85</span>, <span class="fl">0.95</span>, <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-158-1.png" width="672" /></p>
</div>
<div id="t到着時間帯周期関数" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> T:到着時間帯：周期関数<a href="より複雑な事例汎用ベイジアンネットワーク.html#t到着時間帯周期関数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ある日から翌日になるような連続性を保証するために時間の周期性を定義する確率密度関数を用いる</p>
<ul>
<li><p>フォン・ミーゼス分布</p>
<ul>
<li><p>[-π,π]にかけて定義</p></li>
<li><p><span class="math inline">\(\mu\)</span>（どの時間帯にピークを迎えるか）、<span class="math inline">\(\kappa\)</span>（ピークに係る尖度）のパラメータをもつ</p></li>
</ul></li>
</ul>
<p><span class="math display">\[
B\sim\frac{vonMises(0.001,2)-\pi}{2\pi}\cdot24
\]</span></p>
<ul>
<li>運ばれてくる可能性が高い時間帯をAM10-12とし、夜間は少なく見込む</li>
</ul>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb290-1" tabindex="-1"></a><span class="fu">library</span>(circular)</span>
<span id="cb290-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb290-2" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">as.numeric</span>(<span class="fu">rvonmises</span>(<span class="dv">10000</span>, <span class="fl">0.0001</span> <span class="sc">-</span> pi, <span class="dv">2</span>) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> pi) <span class="sc">*</span> <span class="dv">24</span>),</span>
<span id="cb290-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb290-3" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;Time of the day&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;probability&quot;</span>,  <span class="at">main =</span> <span class="st">&quot;&quot;</span>, <span class="at">freq =</span> <span class="cn">FALSE</span>,</span>
<span id="cb290-4"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb290-4" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">24</span>), <span class="at">axes =</span> <span class="cn">FALSE</span>)</span>
<span id="cb290-5"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb290-5" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">label =</span> <span class="cn">FALSE</span>)</span>
<span id="cb290-6"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb290-6" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">24</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-159-1.png" width="672" /></p>
</div>
<div id="wトリアージにかかる待ち時間対数正規分布をともなう確率変数" class="section level3 hasAnchor" number="6.2.6">
<h3><span class="header-section-number">6.2.6</span> W:トリアージにかかる待ち時間：対数正規分布をともなう確率変数<a href="より複雑な事例汎用ベイジアンネットワーク.html#wトリアージにかかる待ち時間対数正規分布をともなう確率変数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="math display">\[
log(W)\sim N(\mu,\sigma^2)
\]</span></p>
<p><span class="math display">\[
\mu=\gamma_0+\gamma_1O+\gamma_2(12-S)+\gamma_3max\{0,6-|T-12|\}
\]</span></p>
<ul>
<li><p>待ち時間のベースライン（T=0, S=12）を20分と想定</p></li>
<li><p>病床利用率Oを常時0.50と設定</p></li>
<li><p>その他詳細はいろいろあるが省略する</p></li>
</ul>
</div>
</div>
<div id="stanを使ってモデル構築" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Stanを使ってモデル構築<a href="より複雑な事例汎用ベイジアンネットワーク.html#stanを使ってモデル構築" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Stanはなんらかの情報が与えられた場合の分布からランダムサンプリングを実行する能力に長けている→samplerそのもの</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb291-1" tabindex="-1"></a><span class="fu">library</span>(rstan)</span></code></pre></div>
<div id="データの生成" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> データの生成<a href="より複雑な事例汎用ベイジアンネットワーク.html#データの生成" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>入力・モデル・出力を宣言するためのブロックで構成される</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-1" tabindex="-1"></a><span class="co">#パラメータは初期化はされるが宣言されない</span></span>
<span id="cb292-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-2" tabindex="-1"></a>stancode <span class="ot">&lt;-</span> <span class="st">&#39;</span></span>
<span id="cb292-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-3" tabindex="-1"></a><span class="st">data {</span></span>
<span id="cb292-4"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-4" tabindex="-1"></a><span class="st">  vector[2] Ap; // shape parameters for the beta distribution.</span></span>
<span id="cb292-5"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-5" tabindex="-1"></a><span class="st">  vector[4] Ip; // probabilities for incident types.</span></span>
<span id="cb292-6"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-6" tabindex="-1"></a><span class="st">  vector[6] Sp; // regression coefficients, logistic regression.</span></span>
<span id="cb292-7"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-7" tabindex="-1"></a><span class="st">  vector[2] Op; // parameters for the beta distribution.</span></span>
<span id="cb292-8"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-8" tabindex="-1"></a><span class="st">  vector[2] Tp; // parameters for the von Mises distribution.</span></span>
<span id="cb292-9"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-9" tabindex="-1"></a><span class="st">  vector[5] Wp; // regression coefficients, log-linear regression.</span></span>
<span id="cb292-10"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-10" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb292-11"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-11" tabindex="-1"></a><span class="st">generated quantities {</span></span>
<span id="cb292-12"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-12" tabindex="-1"></a><span class="st">  real A;</span></span>
<span id="cb292-13"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-13" tabindex="-1"></a><span class="st">  int I;</span></span>
<span id="cb292-14"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-14" tabindex="-1"></a><span class="st">  real S;</span></span>
<span id="cb292-15"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-15" tabindex="-1"></a><span class="st">  real O;</span></span>
<span id="cb292-16"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-16" tabindex="-1"></a><span class="st">  real W;</span></span>
<span id="cb292-17"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-17" tabindex="-1"></a><span class="st">  real T;</span></span>
<span id="cb292-18"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-18" tabindex="-1"></a><span class="st">  A = ceil(beta_rng(Ap[1], Ap[2]) * 100);</span></span>
<span id="cb292-19"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-19" tabindex="-1"></a><span class="st">  I = categorical_rng(Ip);</span></span>
<span id="cb292-20"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-20" tabindex="-1"></a><span class="st">  S = 2 + binomial_rng(10, inv_logit(Sp[1] + A * Sp[2] + Sp[2 + I]));</span></span>
<span id="cb292-21"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-21" tabindex="-1"></a><span class="st">  O = beta_rng(Op[1], Op[2]);</span></span>
<span id="cb292-22"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-22" tabindex="-1"></a><span class="st">  T = (von_mises_rng(Tp[1], Tp[2]) + pi()) / (2 * pi()) * 24;</span></span>
<span id="cb292-23"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-23" tabindex="-1"></a><span class="st">  W = lognormal_rng(Wp[1] + O * Wp[2] + (12 - S) * Wp[3] +</span></span>
<span id="cb292-24"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-24" tabindex="-1"></a><span class="st">                    fmax(6 - fabs(T - 12), 0) * Wp[4], Wp[5]);</span></span>
<span id="cb292-25"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-25" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb292-26"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb292-26" tabindex="-1"></a><span class="st">  &#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb293-1" tabindex="-1"></a><span class="co">#モデルをコンパイル</span></span>
<span id="cb293-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb293-2" tabindex="-1"></a>data.model <span class="ot">&lt;-</span> <span class="fu">stan_model</span>(<span class="at">model_code =</span> stancode)</span></code></pre></div>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-1" tabindex="-1"></a><span class="co">#サンプリング関数にわたしてランダムサンプリングを実行</span></span>
<span id="cb294-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-2" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb294-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-3" tabindex="-1"></a>  <span class="at">Ap =</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">1.5</span>),</span>
<span id="cb294-4"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-4" tabindex="-1"></a>  <span class="at">Ip =</span> <span class="fu">c</span>(<span class="fl">0.075</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>, <span class="fl">0.175</span>),</span>
<span id="cb294-5"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-5" tabindex="-1"></a>  <span class="at">Sp =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="sc">-</span><span class="fl">0.05</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb294-6"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-6" tabindex="-1"></a>  <span class="at">Op =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">2</span>),</span>
<span id="cb294-7"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-7" tabindex="-1"></a>  <span class="at">Tp =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="dv">2</span>),</span>
<span id="cb294-8"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-8" tabindex="-1"></a>  <span class="at">Wp =</span> <span class="fu">c</span>(<span class="fu">log</span>(<span class="dv">20</span>), <span class="dv">2</span> <span class="sc">*</span> <span class="fu">log</span>(<span class="dv">2</span>), <span class="sc">-</span><span class="fl">0.5</span> <span class="sc">*</span> <span class="fu">log</span>(<span class="dv">2</span>), <span class="fl">0.25</span> <span class="sc">*</span> <span class="fu">log</span>(<span class="dv">2</span>), <span class="dv">1</span>)</span>
<span id="cb294-9"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-9" tabindex="-1"></a>)</span>
<span id="cb294-10"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-10" tabindex="-1"></a><span class="co">#パラメータそのものを固定させている</span></span>
<span id="cb294-11"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-11" tabindex="-1"></a><span class="co">#thinでサンプル同士ができる限り独立するように25サンプルごとに1サンプル使用する間引きを実施</span></span>
<span id="cb294-12"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-12" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">sampling</span>(data.model, <span class="at">algorithm =</span> <span class="st">&quot;Fixed_param&quot;</span>,</span>
<span id="cb294-13"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb294-13" tabindex="-1"></a>         <span class="at">data =</span> params, <span class="at">thin =</span> <span class="dv">25</span>, <span class="at">iter =</span> <span class="dv">50000</span>, <span class="at">seed =</span> <span class="dv">42</span>)</span></code></pre></div>
<pre><code>## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 1).
## Chain 1: Iteration:     1 / 50000 [  0%]  (Sampling)
## Chain 1: Iteration:  5000 / 50000 [ 10%]  (Sampling)
## Chain 1: Iteration: 10000 / 50000 [ 20%]  (Sampling)
## Chain 1: Iteration: 15000 / 50000 [ 30%]  (Sampling)
## Chain 1: Iteration: 20000 / 50000 [ 40%]  (Sampling)
## Chain 1: Iteration: 25000 / 50000 [ 50%]  (Sampling)
## Chain 1: Iteration: 30000 / 50000 [ 60%]  (Sampling)
## Chain 1: Iteration: 35000 / 50000 [ 70%]  (Sampling)
## Chain 1: Iteration: 40000 / 50000 [ 80%]  (Sampling)
## Chain 1: Iteration: 45000 / 50000 [ 90%]  (Sampling)
## Chain 1: Iteration: 50000 / 50000 [100%]  (Sampling)
## Chain 1: 
## Chain 1:  Elapsed Time: 0 seconds (Warm-up)
## Chain 1:                0.007 seconds (Sampling)
## Chain 1:                0.007 seconds (Total)
## Chain 1: 
## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 2).
## Chain 2: Iteration:     1 / 50000 [  0%]  (Sampling)
## Chain 2: Iteration:  5000 / 50000 [ 10%]  (Sampling)
## Chain 2: Iteration: 10000 / 50000 [ 20%]  (Sampling)
## Chain 2: Iteration: 15000 / 50000 [ 30%]  (Sampling)
## Chain 2: Iteration: 20000 / 50000 [ 40%]  (Sampling)
## Chain 2: Iteration: 25000 / 50000 [ 50%]  (Sampling)
## Chain 2: Iteration: 30000 / 50000 [ 60%]  (Sampling)
## Chain 2: Iteration: 35000 / 50000 [ 70%]  (Sampling)
## Chain 2: Iteration: 40000 / 50000 [ 80%]  (Sampling)
## Chain 2: Iteration: 45000 / 50000 [ 90%]  (Sampling)
## Chain 2: Iteration: 50000 / 50000 [100%]  (Sampling)
## Chain 2: 
## Chain 2:  Elapsed Time: 0 seconds (Warm-up)
## Chain 2:                0.005 seconds (Sampling)
## Chain 2:                0.005 seconds (Total)
## Chain 2: 
## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 3).
## Chain 3: Iteration:     1 / 50000 [  0%]  (Sampling)
## Chain 3: Iteration:  5000 / 50000 [ 10%]  (Sampling)
## Chain 3: Iteration: 10000 / 50000 [ 20%]  (Sampling)
## Chain 3: Iteration: 15000 / 50000 [ 30%]  (Sampling)
## Chain 3: Iteration: 20000 / 50000 [ 40%]  (Sampling)
## Chain 3: Iteration: 25000 / 50000 [ 50%]  (Sampling)
## Chain 3: Iteration: 30000 / 50000 [ 60%]  (Sampling)
## Chain 3: Iteration: 35000 / 50000 [ 70%]  (Sampling)
## Chain 3: Iteration: 40000 / 50000 [ 80%]  (Sampling)
## Chain 3: Iteration: 45000 / 50000 [ 90%]  (Sampling)
## Chain 3: Iteration: 50000 / 50000 [100%]  (Sampling)
## Chain 3: 
## Chain 3:  Elapsed Time: 0 seconds (Warm-up)
## Chain 3:                0.006 seconds (Sampling)
## Chain 3:                0.006 seconds (Total)
## Chain 3: 
## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 4).
## Chain 4: Iteration:     1 / 50000 [  0%]  (Sampling)
## Chain 4: Iteration:  5000 / 50000 [ 10%]  (Sampling)
## Chain 4: Iteration: 10000 / 50000 [ 20%]  (Sampling)
## Chain 4: Iteration: 15000 / 50000 [ 30%]  (Sampling)
## Chain 4: Iteration: 20000 / 50000 [ 40%]  (Sampling)
## Chain 4: Iteration: 25000 / 50000 [ 50%]  (Sampling)
## Chain 4: Iteration: 30000 / 50000 [ 60%]  (Sampling)
## Chain 4: Iteration: 35000 / 50000 [ 70%]  (Sampling)
## Chain 4: Iteration: 40000 / 50000 [ 80%]  (Sampling)
## Chain 4: Iteration: 45000 / 50000 [ 90%]  (Sampling)
## Chain 4: Iteration: 50000 / 50000 [100%]  (Sampling)
## Chain 4: 
## Chain 4:  Elapsed Time: 0 seconds (Warm-up)
## Chain 4:                0.005 seconds (Sampling)
## Chain 4:                0.005 seconds (Total)
## Chain 4:</code></pre>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb296-1" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;I&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;O&quot;</span>, <span class="st">&quot;T&quot;</span>, <span class="st">&quot;W&quot;</span>)</span>
<span id="cb296-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb296-2" tabindex="-1"></a>aewait <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">extract</span>(fit)[nodes])</span></code></pre></div>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb297-1" tabindex="-1"></a><span class="co">#インシデントのカテゴリをラベル付けした因子型に変換する</span></span>
<span id="cb297-2"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb297-2" tabindex="-1"></a>aewait<span class="sc">$</span>I <span class="ot">&lt;-</span> <span class="fu">factor</span>(aewait<span class="sc">$</span>I,</span>
<span id="cb297-3"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb297-3" tabindex="-1"></a>              <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;domestic&quot;</span>, <span class="st">&quot;road&quot;</span>, <span class="st">&quot;work&quot;</span>, <span class="st">&quot;other&quot;</span>))</span>
<span id="cb297-4"><a href="より複雑な事例汎用ベイジアンネットワーク.html#cb297-4" tabindex="-1"></a><span class="fu">head</span>(aewait)</span></code></pre></div>
<pre><code>##    A     I  S         O         T         W
## 1 82  road  3 0.6811510  1.874496  1.556683
## 2 78  road  5 0.9249541 12.375129 11.410514
## 3 84 other 11 0.8622833 12.511769 33.332342
## 4 42  work 11 0.7455068 14.367820 68.197830
## 5 63  road  7 0.8143039 13.070951 10.136785
## 6 28  work 12 0.9137683 11.489579 41.745250</code></pre>
</div>
<div id="変数に関する確認" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> 変数に関する確認<a href="より複雑な事例汎用ベイジアンネットワーク.html#変数に関する確認" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="時系列データダイナミックベイジアンネットワーク.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
